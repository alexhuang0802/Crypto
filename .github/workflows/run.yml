name: 45m Strategy Auto Run

on:
  schedule:
    # 台灣時間：00:30,03:30,06:30,09:30,12:30,15:30,18:30,21:30
    # UTC：16:30,19:30,22:30,01:30,04:30,07:30,10:30,13:30
    - cron: "30 1,4,7,10,13,16,19,22 * * *"

    # 台灣時間：01:15,04:15,07:15,10:15,13:15,16:15,19:15,22:15
    # UTC：17:15,20:15,23:15,02:15,05:15,08:15,11:15,14:15
    - cron: "15 2,5,8,11,14,17,20,23 * * *"

    # 台灣時間：02:00/02:45,05:00/05:45,...,23:00/23:45
    # UTC：18:00/18:45,21:00/21:45,...,15:00/15:45
    - cron: "0,45 0,3,6,9,12,15,18,21 * * *"
  workflow_dispatch: {}

concurrency:
  group: "45m-strategy"
  cancel-in-progress: true

jobs:
  run:
    runs-on: ubuntu-latest
    timeout-minutes: 15

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      - name: Run strategy
        run: |
          python strategy_45m.py
